<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>å¤éŸ»å°æ±ºï¼šV23 å®Œæ•´è³‡æ–™ç‰ˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+TC:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ğŸ‘‘ çš‡å®¶é…è‰²ç³»çµ± */
            --bg-dark: #0f1219;
            --bg-gradient: radial-gradient(circle at 50% 0%, #2c3e50 0%, #0f1219 80%);
            
            --gold-primary: #d4af37;
            --gold-shine: #f7efd2;
            --gold-metal: linear-gradient(135deg, #bf953f 0%, #fcf6ba 40%, #b38728 60%, #aa771c 100%);
            
            --red-royal: #8a1c1c;
            --red-metal: linear-gradient(135deg, #cb2d3e 0%, #ef473a 100%);
            
            --panel-bg: rgba(20, 25, 35, 0.7);
            --panel-border: 1px solid rgba(212, 175, 55, 0.3);
            
            --font-title: 'Ma Shan Zheng', cursive;
            --font-body: 'Noto Serif TC', serif;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background: var(--bg-dark);
            background-image: var(--bg-gradient);
            font-family: var(--font-body); color: #fff;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        /* èƒŒæ™¯ç´‹ç† */
        body::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40a40 40 0 0 1 40-40h40v40a40 40 0 0 1-40 40H0V40zm40 0a40 40 0 0 1 40-40v40H40z' fill='%23d4af37' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.6; z-index: 0; pointer-events: none;
        }

        #app {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column; z-index: 1;
        }

        /* --- Header --- */
        header {
            height: 70px; flex-shrink: 0;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px; 
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0));
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .app-title { 
            font-family: var(--font-title); font-size: 2.8rem; letter-spacing: 5px;
            background: var(--gold-metal); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 10px rgba(212, 175, 55, 0.5));
        }
        .info-pill {
            background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2);
            padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; color: #aaa;
        }

        /* --- Game Stage --- */
        #game-stage {
            flex: 1; 
            display: grid; 
            grid-template-columns: 280px 1fr 280px;
            gap: 20px; padding: 20px 40px;
            align-items: center; justify-items: center;
            height: 100%; overflow: hidden;
        }

        /* --- Team Panels --- */
        .team-panel {
            width: 100%; height: 90%; 
            background: var(--panel-bg);
            border: var(--panel-border);
            border-radius: 100px 100px 20px 20px;
            display: flex; flex-direction: column; align-items: center; padding: 30px 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            transition: 0.4s;
            position: relative;
        }
        .team-panel.active {
            border-color: var(--gold-primary);
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.15), inset 0 0 20px rgba(212, 175, 55, 0.1);
            transform: translateY(-10px);
        }

        .avatar-frame {
            width: 100px; height: 100px; border-radius: 50%;
            background: var(--gold-metal); padding: 4px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        .avatar { width: 100%; height: 100%; border-radius: 50%; background-size: cover; border: 3px solid #1a1a1a; filter: sepia(0.2); }
        
        .team-title { font-family: var(--font-title); font-size: 2.2rem; margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .score-display {
            font-size: 4rem; font-weight: 900; 
            background: linear-gradient(to bottom, #fff, #bbb); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin: 10px 0;
        }
        .hearts-container { font-size: 1.5rem; color: #e74c3c; margin-bottom: auto; }

        .student-plate {
            width: 100%; text-align: center; padding: 15px 0;
            border-top: 1px solid rgba(255,255,255,0.1); margin-top: auto;
        }
        .student-name { font-size: 1.8rem; font-weight: bold; color: var(--gold-primary); }

        /* --- Center Card --- */
        .card-stage {
            width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; perspective: 1500px;
        }
        .main-card {
            width: 100%; max-width: 600px; height: 90%; 
            position: relative; transform-style: preserve-3d; transition: transform 0.8s;
        }
        .main-card.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 20px; 
            border: 4px solid #444; outline: 2px solid var(--gold-primary); outline-offset: -10px;
            background: #fdfbf7; 
            display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 30px 80px rgba(0,0,0,0.8);
        }
        .front { background-image: url('https://www.transparenttextures.com/patterns/rice-paper-2.png'); }
        .back { transform: rotateY(180deg); background: #fff; padding: 40px; text-align: left; overflow-y: auto; color: #222; }

        .q-visual { height: 40%; background: #111; position: relative; border-bottom: 4px double var(--gold-primary); }
        .q-img { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.9; }
        
        .q-body { flex: 1; padding: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .q-text { font-size: 2.2rem; font-weight: bold; color: #1a1a1a; line-height: 1.5; font-family: var(--font-body); }
        .q-cat { 
            position: absolute; top: 15px; left: 15px; 
            background: var(--gold-primary); color: #000; padding: 4px 12px; 
            font-weight: bold; font-size: 0.9rem; border-radius: 4px;
        }

        /* --- Footer & Buttons --- */
        footer {
            height: 100px; padding: 0 40px; 
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
            z-index: 10;
        }
        .gem-btn {
            position: relative; border: none; outline: none; background: transparent; cursor: pointer;
            padding: 16px 40px; border-radius: 50px;
            font-size: 1.3rem; font-weight: 900; color: #fff;
            background: linear-gradient(180deg, rgba(255,255,255,0.1), rgba(0,0,0,0.2));
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.2s; overflow: hidden; display: flex; align-items: center; gap: 10px;
        }
        .btn-gold { 
            background-color: #d4af37; background-image: linear-gradient(160deg, #f1c40f, #b8860b);
            border: 2px solid #fff5c3;
        }
        .btn-green { background-image: linear-gradient(160deg, #2ecc71, #27ae60); border: 2px solid #a8e6cf; }
        .btn-red { background-image: linear-gradient(160deg, #e74c3c, #c0392b); border: 2px solid #ffbcb5; }
        .gem-btn:active { transform: translateY(2px); box-shadow: none; }
        .hidden { display: none !important; }

        /* --- Overlays --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5, 5, 8, 0.95); z-index: 2000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(20px);
        }
        
        /* Tarot Cards */
        .cards-container { display: flex; gap: 40px; perspective: 1200px; width: 100%; justify-content: center; align-items: center; }
        .tarot-card {
            width: 260px; height: 460px; position: relative; cursor: pointer;
            transform-style: preserve-3d; transition: transform 0.6s;
        }
        .tarot-card:hover { transform: translateY(-30px) rotateX(10deg); z-index: 10; }
        .tarot-card.flipped { transform: rotateY(180deg); }
        .tarot-card.disabled { opacity: 0.1; filter: grayscale(100%); pointer-events: none; }
        .tarot-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 15px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,1);
        }
        .tarot-back {
            background-color: #111;
            background-image: linear-gradient(30deg, #000 12%, transparent 12.5%, transparent 87%, #000 87.5%, #000);
            background-size: 40px 70px;
            border: 4px solid var(--gold-primary); display: flex; justify-content: center; align-items: center;
        }
        .tarot-emblem {
            width: 120px; height: 120px; border: 2px solid var(--gold-primary);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            background: #000; box-shadow: 0 0 20px var(--gold-primary); font-size: 3rem;
        }
        .style-punish .tarot-back { border-color: var(--red-royal); background: #2b0505; }
        .style-punish .tarot-emblem { border-color: var(--red-royal); color: var(--red-royal); box-shadow: 0 0 20px var(--red-royal); }
        .tarot-front {
            background: #fffbf0; transform: rotateY(180deg); padding: 20px; text-align: center;
            display: flex; flex-direction: column; align-items: center; border: 8px solid var(--gold-primary);
        }
        .tf-title { 
            font-family: var(--font-title); font-size: 2.5rem; line-height: 1.2; 
            color: #000; margin-bottom: 15px; border-bottom: 2px solid #ccc; padding-bottom: 10px; width: 100%;
        }
        .tf-desc { font-size: 1.2rem; color: #444; font-weight: bold; flex: 1; display: flex; align-items: center; justify-content: center; }

        @media (max-width: 1024px) {
            #game-stage { grid-template-columns: 1fr; grid-template-rows: auto 1fr auto; }
            footer { grid-template-columns: 1fr; height: auto; gap: 15px; padding: 20px; }
            .gem-btn { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>
    <div id="app">
        <header>
            <div class="info-pill">é¡Œåº«æ•¸: <span id="q-count">0</span></div>
            <div class="app-title">å¤éŸ»å°æ±º</div>
            <button class="gem-btn" style="padding:10px 15px; font-size:1.2rem;" onclick="openSettings()">âš™ï¸</button>
        </header>
        
        <div id="game-stage">
            <div class="team-panel team-a active" id="panel-a">
                <div class="avatar-frame"><div class="avatar" style="background-image: url('https://images.unsplash.com/photo-1542596768-5d1d21f1cfb6?w=400')"></div></div>
                <div class="team-title" style="color:#ff7675;">è±ªæ”¾æ´¾</div>
                <div class="score-display" id="score-a">100</div>
                <div class="hearts-container" id="hearts-a">â¤ï¸â¤ï¸â¤ï¸</div>
                <div class="student-plate">
                    <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">å…ˆé‹’æˆ°å°‡</div>
                    <div class="student-name" id="student-name-a">æº–å‚™</div>
                </div>
                <div style="margin-top:10px; display:grid; grid-template-columns:1fr 1fr; gap:5px; width:100%; opacity:0.3; transition:0.3s;" onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.3">
                    <button onclick="modStat('a','s',10)" style="background:#444; border:none; color:#fff; cursor:pointer;">+10</button>
                    <button onclick="modStat('a','s',-10)" style="background:#444; border:none; color:#fff; cursor:pointer;">-10</button>
                    <button onclick="modStat('a','h',1)" style="background:#444; border:none; color:#fff; cursor:pointer;">+â¤</button>
                    <button onclick="modStat('a','h',-1)" style="background:#444; border:none; color:#fff; cursor:pointer;">-â¤</button>
                </div>
            </div>

            <div class="card-stage">
                <div class="main-card" id="game-card" onclick="flipCard()">
                    <div class="card-face front">
                        <div class="q-visual" id="card-img"><div class="q-img" style="background-image: url('https://images.unsplash.com/photo-1516541196182-6bdb0516ed27?w=800')"></div></div>
                        <div class="q-body">
                            <div class="q-cat" id="q-cat">æº–å‚™</div>
                            <div class="q-text" id="q-text">é»æ“Šä¸‹æ–¹ã€ŒæŠ½å–è©¦ç…‰ã€<br>é–‹å§‹å°æ±º</div>
                            <div style="margin-top:auto; font-size:0.9rem; color:#999;">(é»æ“Šå¡ç‰‡ç¿»é–±ç­”æ¡ˆ)</div>
                        </div>
                    </div>
                    <div class="card-face back">
                        <div style="font-size:1.5rem; color:#c0392b; border-bottom:2px solid #ccc; margin-bottom:15px; font-weight:bold;">ç­”æ¡ˆè§£æ</div>
                        <div id="q-ans" style="font-size:1.4rem; line-height:1.6;"></div>
                    </div>
                </div>
            </div>

            <div class="team-panel team-b" id="panel-b">
                <div class="avatar-frame"><div class="avatar" style="background-image: url('https://images.unsplash.com/photo-1549488497-2900e643cc21?w=400')"></div></div>
                <div class="team-title" style="color:#74b9ff;">å©‰ç´„æ´¾</div>
                <div class="score-display" id="score-b">100</div>
                <div class="hearts-container" id="hearts-b">â¤ï¸â¤ï¸â¤ï¸</div>
                <div class="student-plate">
                    <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">å…ˆé‹’æˆ°å°‡</div>
                    <div class="student-name" id="student-name-b">æº–å‚™</div>
                </div>
                <div style="margin-top:10px; display:grid; grid-template-columns:1fr 1fr; gap:5px; width:100%; opacity:0.3; transition:0.3s;" onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.3">
                    <button onclick="modStat('b','s',10)" style="background:#444; border:none; color:#fff; cursor:pointer;">+10</button>
                    <button onclick="modStat('b','s',-10)" style="background:#444; border:none; color:#fff; cursor:pointer;">-10</button>
                    <button onclick="modStat('b','h',1)" style="background:#444; border:none; color:#fff; cursor:pointer;">+â¤</button>
                    <button onclick="modStat('b','h',-1)" style="background:#444; border:none; color:#fff; cursor:pointer;">-â¤</button>
                </div>
            </div>
        </div>

        <footer>
            <div style="display:flex; gap:20px;">
                <button class="gem-btn" onclick="initSelection('chance')">âœ¨ éŒ¦å›Š (æ©Ÿæœƒ)</button>
            </div>
            
            <div style="display:flex; flex-direction:column; align-items:center;">
                <button class="gem-btn btn-gold" id="btn-draw" onclick="drawQuestion()" style="transform:scale(1.2);">ğŸ“œ æŠ½å–è©¦ç…‰</button>
                <div id="action-btns" class="hidden" style="display:flex; gap:20px;">
                    <button class="gem-btn btn-green" onclick="modStat(state.turn,'s',10); closeQuestion();">âœ… ç­”å° (+10)</button>
                    <button class="gem-btn btn-red" onclick="initSelection('punish')">âŒ ç­”éŒ¯ (æŠ½æ‡²ç½°å¡)</button>
                </div>
            </div>

            <div style="display:flex; justify-content:flex-end;">
                <button class="gem-btn btn-red" style="border:2px dashed #ff5e57;" onclick="showWheel()">ğŸ¡ çµ‚æ¥µæ‡²ç½° (è€å¸«å°ˆç”¨)</button>
            </div>
        </footer>
    </div>

    <div class="overlay" id="overlay-select">
        <h1 id="select-title" style="font-family:var(--font-title); color:var(--gold-primary); font-size:4rem; margin-bottom:40px;">å‘½é‹æŠ‰æ“‡</h1>
        <div class="cards-container" id="cards-grid"></div>
        <button class="gem-btn hidden" id="btn-confirm-select" style="margin-top:50px;" onclick="closeSelection()">ç¢ºèª (ä¸‹ä¸€ä½)</button>
    </div>

    <div class="overlay" id="overlay-settings">
        <div style="background:#fff; color:#000; padding:40px; border-radius:20px; width:800px; max-height:80vh; overflow-y:auto;">
            <h2 style="font-family:var(--font-title); color:#2c3e50;">âš™ï¸ éŠæˆ²åå–®è¨­å®š</h2>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
                <div>
                    <h4>è±ªæ”¾æ´¾åå–® (ä¸€è¡Œä¸€å€‹)</h4>
                    <textarea id="input-roster-a" style="width:100%; height:200px;"></textarea>
                </div>
                <div>
                    <h4>å©‰ç´„æ´¾åå–® (ä¸€è¡Œä¸€å€‹)</h4>
                    <textarea id="input-roster-b" style="width:100%; height:200px;"></textarea>
                </div>
            </div>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="gem-btn" style="flex:1; font-size:1rem;" onclick="saveRoster()">ğŸ’¾ æ›´æ–°åå–®</button>
                <button class="gem-btn btn-red" style="flex:1; font-size:1rem;" onclick="document.getElementById('overlay-settings').style.display='none'">é—œé–‰</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay-wheel">
        <h1 style="font-family:var(--font-title); color:var(--gold-primary); font-size:4rem; text-shadow:0 0 20px black;">çµ‚æ¥µè¼ªç›¤</h1>
        <div style="width:500px; height:500px; position:relative; margin:30px;">
            <div style="position:absolute; top:-30px; left:50%; transform:translateX(-50%); width:0; height:0; border-left:25px solid transparent; border-right:25px solid transparent; border-top:50px solid #fff; z-index:10; filter:drop-shadow(0 5px 5px rgba(0,0,0,0.5));"></div>
            <canvas id="wheel-canvas" width="500" height="500" style="width:100%; height:100%; border-radius:50%; border:10px solid var(--gold-primary); box-shadow:0 0 60px rgba(0,0,0,0.8); transition:transform 5s cubic-bezier(0.1,0,0.1,1);"></canvas>
        </div>
        <button class="gem-btn btn-gold" id="btn-spin" onclick="spinWheel()">ğŸš€ å•Ÿå‹•</button>
        <button class="gem-btn hidden" id="btn-close-wheel" style="margin-top:20px;" onclick="document.getElementById('overlay-wheel').style.display='none'">é—œé–‰</button>
    </div>

    <script>
        // --- 1. è³‡æ–™åº« (å·²å¡«å…¥ Excel å…§å®¹) ---
        let db = {
            questions: [
                {cat:"è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q:"ã€Œå¤§æ±Ÿæ±å»ï¼Œæµªæ·˜ç›¡ã€åƒå¤é¢¨æµäººç‰©ã€ä¸€å¥ï¼Œå¥ å®šäº†å…¨è©æ€æ¨£çš„æ„Ÿæƒ…åŸºèª¿ï¼Ÿ", a:"å¥ å®šäº†ã€æ‚²æ¶¼é›„å£¯ã€‘çš„åŸºèª¿ã€‚æ„Ÿæ…¨æ™‚å…‰æµé€ï¼Œæ­·å²ä¸Šçš„è‹±é›„äººç‰©éƒ½éš¨æ™‚é–“æ¶ˆé€ï¼Œå¼•å‡ºå¾Œæ–‡å°æ­·å²èˆˆè¡°çš„æ„Ÿå˜†ã€‚", img:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=600"},
                {cat:"è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q:"è©ä¸­ã€Œäº‚çŸ³ç©¿ç©ºï¼Œé©šæ¿¤æ‹å²¸ï¼Œæ²èµ·åƒå †é›ªã€é‹ç”¨äº†å“ªäº›ä¿®è¾­æ‰‹æ³•ï¼Ÿ", a:"1. ã€èª‡å¼µã€‘ï¼ˆç©¿ç©ºã€åƒå †é›ªï¼‰<br>2. ã€æ“¬äººã€‘ï¼ˆé©šæ¿¤æ‹å²¸ï¼‰<br>3. ã€å€Ÿå–»ã€‘ï¼ˆä»¥ã€Œé›ªã€å–»æµªèŠ±ï¼‰ã€‚", img:"https://images.unsplash.com/photo-1505673542670-a5e3ff5b14a3?w=600"},
                {cat:"è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q:"ä½œè€…ç‚ºä½•è¦åœ¨è©ä¸­åˆ»ç•«å‘¨ç‘œã€Œé›„å§¿è‹±ç™¼ï¼Œç¾½æ‰‡ç¶¸å·¾ã€çš„å½¢è±¡ï¼Ÿ", a:"é‹ç”¨äº†ã€è¥¯æ‰˜ã€‘æ‰‹æ³•ã€‚ä»¥å‘¨ç‘œå¹´å°‘å¾—å¿—ã€ç«‹ä¸‹èµ«èµ«æˆ°åŠŸï¼Œåè¥¯è‡ªå·±å¹´è¯è€å»å»å£¯å¿—æœªé…¬ï¼ˆæ—©ç”Ÿè¯é«®ï¼‰çš„ç„¡å¥ˆã€‚", img:""},
                {cat:"è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q:"ã€Œå°å–¬åˆå«äº†ã€é€™ä¸€ç´°ç¯€çš„æå¯«æœ‰ä½•ä½œç”¨ï¼Ÿ", a:"ä»¥ç¾äººè¥¯æ‰˜è‹±é›„ã€‚æš—ç¤ºå‘¨ç‘œç•¶æ™‚å¹´è¼•æœ‰ç‚ºï¼Œæ„›æƒ…äº‹æ¥­å…©å¾—æ„ï¼Œæ›´é¡¯å…¶é¢¨æµç€Ÿç‘ã€‚", img:""},
                {cat:"ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q:"ã€Œæ»¿åœ°é»ƒèŠ±å †ç©ï¼Œæ†”æ‚´æï¼Œå¦‚ä»Šæœ‰èª°å ªæ‘˜ã€é‹ç”¨äº†ç”šéº¼ä¿®è¾­ï¼Ÿæ¯”å–»ç”šéº¼ï¼Ÿ", a:"é‹ç”¨äº†ã€è±¡å¾µã€‘ï¼ˆæˆ–å€Ÿç‰©è‡ªæ³ï¼‰ã€‚ä»¥é»ƒèŠ±æ˜”æ—¥ç››é–‹å¦‚ä»Šæ¯èå †ç©ï¼Œè±¡å¾µè‡ªå·±æ˜”æ—¥å®¹é¡ç¾å¥½ï¼Œå¦‚ä»Šã€å¹´è€è‰²è¡°ã€å­¤è‹¦ç„¡ä¾ã€‘çš„å¢ƒæ³ã€‚", img:""},
                {cat:"ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q:"ã€Œå®ˆè‘—çª—å…’ï¼Œç¨è‡ªæ€ç”Ÿå¾—é»‘ã€è¡¨é”äº†ä½œè€…æ€æ¨£çš„æ„Ÿå—ï¼Ÿ", a:"è¡¨é”äº†ã€åº¦æ—¥å¦‚å¹´ã€‘çš„å­¤ç¨æ„Ÿã€‚å­¤èº«ä¸€äººï¼Œæ™‚é–“éå¾—æ¥µæ…¢ï¼Œé›£ä»¥ç†¬åˆ°å¤©é»‘ã€‚", img:""},
                {cat:"ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q:"å…¨è©çµå°¾ã€Œé€™æ¬¡ç¬¬ï¼Œæ€ä¸€å€‹æ„å­—äº†å¾—ã€åœ¨ä½ˆå±€ä¸Šæœ‰ä½•ç‰¹è‰²ï¼Ÿ", a:"ã€å’ç« é¡¯å¿—ã€‘ã€‚ç¸½çµå…¨è©ï¼Œèªªæ˜é€™ç¨®äº¡åœ‹ä¹‹æ¨ã€å–ªå¤«ä¹‹ç—›ã€æµé›¢ä¹‹è‹¦äº¤ç¹”ï¼Œå·²è¶…è¶Šäº†ä¸€èˆ¬æ„ç¾©ä¸Šçš„ã€Œæ„ã€ã€‚", img:""},
                {cat:"ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q:"ã€Œé€™æ¬¡ç¬¬ï¼Œæ€ä¸€å€‹æ„å­—äº†å¾—ã€ä¸­çš„ã€Œé€™æ¬¡ç¬¬ã€å…·é«”æ˜¯æŒ‡ç”šéº¼ï¼Ÿ", a:"æŒ‡ã€å…‰æ™¯/æƒ…æ³ã€‘ã€‚æ¦‚æ‹¬å‰æ–‡çš„æ°£å€™é©Ÿè®Šã€é›éå‚·å¿ƒã€é»ƒèŠ±æ†”æ‚´ã€æ¢§æ¡ç´°é›¨ç­‰ä¸€é€£ä¸²ã€æ·’æ…˜çš„æ™¯è±¡èˆ‡æ„Ÿå—ã€‘ã€‚", img:""},
                {cat:"è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q:"ã€Œæ±é¢¨å¤œæ”¾èŠ±åƒæ¨¹ï¼Œæ›´å¹è½ã€æ˜Ÿå¦‚é›¨ã€æå¯«çš„æ˜¯ç”šéº¼æ™¯è±¡ï¼Ÿ", a:"æå¯«å…ƒå®µç¯€ã€ç…™ç«ç’€ç’¨ã€‘ï¼ˆæˆ–èŠ±ç‡ˆç¹å¤šï¼‰çš„ç†±é¬§æ™¯è±¡ã€‚é€™è£¡é‹ç”¨äº†æ¯”å–»ï¼Œå°‡ç…™ç«/ç‡ˆç«æ¯”ä½œèŠ±æ¨¹å’Œæµæ˜Ÿé›¨ã€‚", img:""},
                {cat:"è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q:"ã€Œå¯¶é¦¬é›•è»Šé¦™æ»¿è·¯ã€ä¸€å¥å¾ç”šéº¼æ„Ÿå®˜æå¯«å…ƒå®µç››æ³ï¼Ÿ", a:"å¾ã€å—…è¦ºã€‘ï¼ˆé¦™æ»¿è·¯ï¼‰å’Œè¦–è¦ºï¼ˆå¯¶é¦¬é›•è»Šï¼‰æå¯«ã€‚å´é¢åæ˜ å‡ºéŠäººçš„å¯Œè²´èˆ‡éŠå®¢ä¹‹å¤šã€‚", img:""}
            ],
            ops: [
                {title:"ç¾½æ‰‡ç¶¸å·¾", desc:"ã€è«‡ç¬‘é–“ã€‘æŒ‡å®šæ•µæ–¹ä¸€åã€Œä¸»å°‡ã€ç¦è¨€ä¸€å›åˆï¼Œè©²å›åˆæ•µæ–¹åªèƒ½ç”±ã€Œå°å…µã€ä½œç­”ã€‚", val:0},
                {title:"å¤§æ±Ÿæ±å»", desc:"æ°£å‹¢å¦‚è™¹ï¼ç™¼å‹•çŒ›æ”»ï¼Œå°æ•µæ–¹ç¾æœ‰åˆ†æ•¸é€²è¡Œã€Œæµªæ·˜ç›¡ã€ï¼Œç›´æ¥æ‰£é™¤æ•µæ–¹ 20 é»åˆ†æ•¸ã€‚", val:20},
                {title:"é©€ç„¶å›é¦–", desc:"çµ•è™•é€¢ç”Ÿã€‚è‹¥ç­”éŒ¯é¡Œç›®ï¼Œå¯æ“æœ‰ä¸€æ¬¡ã€Œå›é¦–ã€æ©Ÿæœƒï¼ˆé‡æ–°ä½œç­”æˆ–æ›é¡Œï¼‰ã€‚", val:0},
                {title:"å¿ƒå‡å½¢é‡‹", desc:"èˆ‡è¬åŒ–å†¥åˆï¼Œé€²å…¥ç„¡æ•µç‹€æ…‹ã€‚æŠµéŠ·ä¸‹ä¸€æ¬¡å—åˆ°çš„ä»»ä½•æ‡²ç½°ï¼ˆåŒ…æ‹¬æ‰£åˆ†æˆ–å¤§è½‰ç›¤ï¼‰ã€‚", val:0},
                {title:"é›éä¹Ÿ", desc:"ã€å»æ˜¯èˆŠæ™‚ç›¸è­˜ã€‘ã€‚å¯å‘å ´å¤–ã€ŒèˆŠè­˜ã€ï¼ˆè€å¸«æˆ–éåƒè³½åŒå­¸ï¼‰æ±‚æ•‘ä¸€æ¬¡ã€‚", val:0},
                {title:"æ±é¢¨å¤œæ”¾", desc:"èŠ±åƒæ¨¹ï¼Œæ˜Ÿå¦‚é›¨ã€‚å¹¸é‹å¤§çˆ†ç™¼ï¼Œæœ¬é¡Œå¾—åˆ†é›™å€ã€‚", val:0},
                {title:"äº‚çŸ³ç©¿ç©º", desc:"é©šæ¿¤æ‹å²¸ï¼Œæ²èµ·åƒå †é›ªã€‚éš¨æ©ŸæŒ‡å®šæ•µæ–¹å…©åéšŠå“¡ã€Œè¢«æµªæ²èµ°ã€ï¼ˆæš«åœåƒèˆ‡è¨è«–ä¸€å›åˆï¼‰ã€‚", val:0},
                {title:"ä¸€å°Šé‚„é…¹æ±Ÿæœˆ", desc:"è±å…æ¬Šï¼šå‘å‘½é‹è‡´æ•¬ï¼Œå¦‚æœé€™é¡Œç­”éŒ¯ï¼Œç„¡éœ€æ¥å—ä»»ä½•æ‡²ç½°ã€‚", val:0},
                {title:"çœ¾è£¡å°‹ä»–", desc:"åœ¨æ•µæ–¹éšŠä¼ä¸­ã€Œå°‹æ‰¾ã€ä¸€äººå¹«åŠ©ä½ ä½œç­”ã€‚å¦‚æœä»–ç­”å°ï¼Œé›™è´ï¼›ç­”éŒ¯ï¼Œé›™è¼¸ã€‚", val:0}
            ],
            puns: [
                {title:"æ—©ç”Ÿè¯é«®", desc:"å¤šæƒ…æ‡‰ç¬‘æˆ‘ã€‚å…¨éšŠè¢«å˜²ç¬‘ï¼Œå£«æ°£å—æï¼Œæœ¬é¡Œå€’æ‰£ 10 åˆ†ã€‚", val:10},
                {title:"å€Ÿé…’æ¾†æ„", desc:"ä¸‰æ¯å…©ç›æ·¡é…’ï¼Œæ€æ•µä»–æ™šä¾†é¢¨æ€¥ï¼Ÿé ­æ˜è…¦è„¹ï¼Œä¸‹å›å³ä½¿æ­£ç¢ºï¼Œåˆ†æ•¸æ¸›åŠã€‚", val:0},
                {title:"æ˜æ˜æ¬²ç¡", desc:"æ–½æ–½è€Œè¡Œï¼Œæ¼«æ¼«è€ŒéŠã€‚éšŠä¼é€²å…¥å¤¢éŠç‹€æ…‹ï¼Œæ‰£æ¸›30åˆ†", val:30},
                {title:"é»é»æ»´æ»´", desc:"æ¢§æ¡æ›´å…¼ç´°é›¨ã€‚é€™å›åˆè‹¥ç­”éŒ¯ï¼Œæ‰£åˆ†æœƒåƒé›¨é»ä¸€æ¨£ã€Œé»é»æ»´æ»´ã€é€£çºŒæ‰£å…©æ¬¡ã€‚", val:0},
                {title:"ç‡ˆç«é—ŒçŠ", desc:"çœ¾é‡Œå°‹ä»–åƒç™¾åº¦ã€‚éšŠå‹å¤±è¹¤äº†ï¼Ÿä¸‹å›åˆéšŠé•·å¿…é ˆã€Œå­¤ç¨ä½œç­”ã€ï¼Œä¸å¯èˆ‡éšŠå“¡è¨è«–ã€‚", val:0},
                {title:"æ†”æ‚´æ", desc:"äººæ¯”é»ƒèŠ±ç˜¦ã€‚å…¨éšŠé«”åŠ›ä¸æ”¯ï¼Œä¸‹å›åˆå¿…é ˆå…¨é«”ã€Œè¶´åœ¨æ¡Œä¸Šã€ä½œç­”ã€‚", val:0},
                {title:"æ·’æ·’æ…˜æ…˜", desc:"å›ç­”ä¸‹ä¸€é¡Œå‰ï¼Œå…¨éšŠå¿…é ˆç”¨æœ€æ‚²å‚·çš„èªæ°£å…ˆå˜†æ°£ä¸‰è²ï¼Œå¦å‰‡ç­”æ¡ˆç„¡æ•ˆã€‚", val:0}
            ],
            wheel: [
                "ã€é©šæ¿¤æ‹å²¸ã€‘äººé«”æµ·æµªï¼šå…¨çµ„èµ·ç«‹ï¼Œç”¨èª‡å¼µè‚¢é«”å‹•ä½œæ¨¡æ“¬ã€Œäº‚çŸ³ç©¿ç©ºã€é©šæ¿¤æ‹å²¸ã€çš„ç•«é¢ï¼Œéœ€æœ‰é…éŸ³ã€‚",
                "ã€ç¬‘èªç›ˆç›ˆã€‘å§¨æ¯ç¬‘ï¼šå…¨çµ„æ¨¡ä»¿å¤ä»£ä»•å¥³ã€Œç¬‘èªç›ˆç›ˆã€ï¼Œä¿æŒå°·å°¬è€Œä¸å¤±ç¦®è²Œçš„å¾®ç¬‘å®šæ ¼ 30 ç§’ã€‚",
                "ã€ä¸€å°Šé‚„é…¹æ±Ÿæœˆã€‘æˆ²ç²¾ä¸Šèº«ï¼šéšŠé•·éœ€å°è‘—ä¸€å€‹æ°´æ¨½ï¼ˆæ±Ÿæœˆï¼‰ï¼Œæ·±æƒ…æœ—èª¦ã€Šå¿µå¥´å¬Œã€‹ä¸‹ç‰‡ï¼Œè¦æ¼”å‡ºã€Œäººç”Ÿå¦‚å¤¢ã€çš„æ»„æ¡‘æ„Ÿã€‚",
                "ã€æ€ä¸€å€‹æ„å­—äº†å¾—ã€‘é€£ç’°å˜†æ°£ï¼šå…¨çµ„è¼ªæµç”¨ä¸åŒçš„èªæ°£ï¼ˆæ†¤æ€’ã€å“€æ€¨ã€ç„¡å¥ˆã€æ’’å¬Œï¼‰å˜†æ°£èªªå‡ºã€Œæ„å•Šï½ã€ã€‚",
                "ã€æœ›è¥¿å±±ã€‘ç™»é«˜æœ›é ï¼šå…¨çµ„ç«™åœ¨æ¤…å­ä¸Šï¼ˆæ³¨æ„å®‰å…¨ï¼‰ï¼Œæ¨¡ä»¿æŸ³å®—å…ƒç™¼ç¾æ–°å¤§é™¸çš„è¡¨æƒ…ï¼Œå¤§å–Šã€Œå§‹å¾—è¥¿å±±å®´éŠè¨˜ï¼ã€ã€‚",
                "ã€é›„å§¿è‹±ç™¼ã€‘Chokæ¨£å®šæ ¼ï¼šæ¨¡ä»¿å‘¨ç‘œï¼Œæ“ºå‡ºæœ€å¸¥/æœ€ç¾çš„ Poseï¼Œçµ¦æ•µæ–¹éšŠä¼æ‹ç…§å­˜è­‰ã€‚",
                "ã€æ·’æ·’æ…˜æ…˜æˆšæˆšã€‘å“­è…”Rapï¼šç”¨æ‚²å‚·çš„å“­è…”ï¼Œä»¥ Rap çš„ç¯€å¥å”¸å‡ºã€Šè²è²æ…¢ã€‹é–‹é ­åå››å€‹ç–Šå­—ã€‚",
                "ã€éç›®ä¸å¿˜ã€‘éš¨æ©ŸæŠ½å–ä¸€å¥ç¯„æ–‡é‡‘å¥ï¼Œå…¨éšŠéœ€åœ¨ä¸€åˆ†é˜å…§èƒŒå‡ºä¾†ã€‚"
            ],
            roster: {
                a: ["æ—è¡è€€","ç¾…å°¹å‘ˆ","è‘£æ™ºæ†","ç‹æ˜Šéˆ","é»ƒæ•¬ç†™","é»ƒæ®·æœ—","æ¥Šæ³“æ²»","é‚±å•Ÿç¾©","æ¥Šå…¶è","æ¥Šæ‰¿è»’","ä½™å€¬é¨«","ä½™é™½æ²…"],
                b: ["é„­æ™ºå…","å¼µæ›‰æ™´","å¼µç•¹æ´¥","æ—æ¨‚æ¬£","å‘‚é§æ·‡","è‹—å¯æ¬£","æˆ´éœæ¬£","æˆ´ä¾æ›ˆ","å¾è© çª","å°¹ç¥‰å–„","é»ƒæ¢“å©•","ç‹è© æ©"]
            }
        };

        // --- 2. éŠæˆ²æ ¸å¿ƒé‚è¼¯ ---
        let state = {
            turn: 'a', // 'a' or 'b'
            scores: { a: 100, b: 100 },
            hearts: { a: 3, b: 3 },
            curQ: null
        };

        window.onload = function() {
            updateUI();
            // é å¡«è¨­å®šæ¡†
            document.getElementById('input-roster-a').value = db.roster.a.join('\n');
            document.getElementById('input-roster-b').value = db.roster.b.join('\n');
        };

        function updateUI() {
            document.getElementById('q-count').innerText = db.questions.length;
            const t = state.turn;
            const a = document.getElementById('panel-a');
            const b = document.getElementById('panel-b');
            
            if (t === 'a') { a.classList.add('active'); b.classList.remove('active'); }
            else { b.classList.add('active'); a.classList.remove('active'); }
            
            ['a','b'].forEach(team => {
                document.getElementById(`score-${team}`).innerText = state.scores[team];
                let h = "";
                for(let i=0; i<state.hearts[team]; i++) h += "â¤ï¸";
                if(state.hearts[team]<=0) h = "ğŸ’”";
                document.getElementById(`hearts-${team}`).innerText = h;
            });
        }

        function modStat(team, type, val) {
            if (type === 'h') state.hearts[team] = Math.max(0, state.hearts[team] + val);
            else state.scores[team] += val;
            updateUI();
        }

        function drawQuestion() {
            if (db.questions.length === 0) return alert("é¡Œåº«å·²ç©ºï¼");
            
            const idx = Math.floor(Math.random() * db.questions.length);
            state.curQ = db.questions[idx];
            db.questions.splice(idx, 1);

            const r = db.roster[state.turn];
            const s = (r && r.length) ? r[Math.floor(Math.random() * r.length)] : "å…¨é«”éšŠå“¡";
            
            document.getElementById(`student-name-${state.turn}`).innerText = s;
            document.getElementById(`student-name-${state.turn==='a'?'b':'a'}`).innerText = "---";
            
            const card = document.getElementById('game-card');
            card.classList.remove('flipped');
            
            document.getElementById('q-cat').innerText = state.curQ.cat;
            document.getElementById('q-text').innerText = state.curQ.q;
            document.getElementById('q-ans').innerHTML = state.curQ.a;
            
            const img = document.getElementById('card-img');
            const innerImg = img.querySelector('.q-img');
            if(state.curQ.img && state.curQ.img.startsWith('http')) {
                innerImg.style.backgroundImage = `url('${state.curQ.img}')`;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }

            document.getElementById('btn-draw').classList.add('hidden');
            document.getElementById('action-btns').classList.remove('hidden');
            updateUI();
        }

        function closeQuestion() {
            state.turn = state.turn === 'a' ? 'b' : 'a';
            document.getElementById('btn-draw').classList.remove('hidden');
            document.getElementById('action-btns').classList.add('hidden');
            document.getElementById('game-card').classList.remove('flipped');
            document.getElementById('student-name-a').innerText = "æº–å‚™";
            document.getElementById('student-name-b').innerText = "æº–å‚™";
            updateUI();
        }

        function flipCard() {
            document.getElementById('game-card').classList.toggle('flipped');
        }

        function openSettings() {
            document.getElementById('overlay-settings').style.display='flex';
        }

        function saveRoster() {
            const ra = document.getElementById('input-roster-a').value.split('\n').filter(x=>x.trim());
            const rb = document.getElementById('input-roster-b').value.split('\n').filter(x=>x.trim());
            db.roster.a = ra;
            db.roster.b = rb;
            alert("åå–®å·²æ›´æ–°ï¼");
            document.getElementById('overlay-settings').style.display='none';
        }

        // --- Card Selection (Chance/Punish) ---
        function initSelection(type) {
            // ç­”éŒ¯é‚è¼¯ï¼šå¦‚æœé¸çš„æ˜¯æ‡²ç½°(punish)ï¼Œä»£è¡¨é€™ä¸€é¡Œç­”éŒ¯äº†ï¼Œé€²å…¥æŠ½å¡ç’°ç¯€
            // æ ¹æ“šæ‚¨çš„è¦æ±‚ï¼Œç­”éŒ¯ -> æ‡²ç½°å¡ã€‚é€™è£¡ä¸å…ˆæ‰£åˆ†ï¼Œè€Œæ˜¯çœ‹å¡ç‰‡çµæœã€‚
            
            const pool = type === 'chance' ? db.ops : db.puns;
            // æ´—ç‰ŒæŠ½3å¼µ
            const shuffled = [...pool].sort(() => 0.5 - Math.random());
            const selected3 = shuffled.slice(0, 3);
            while(selected3.length < 3) selected3.push({title:"ç©ºç¼º", desc:"...", val:0});

            const grid = document.getElementById('cards-grid');
            grid.innerHTML = '';
            const overlayClass = type === 'chance' ? 'style-chance' : 'style-punish';
            document.getElementById('overlay-select').className = `overlay ${overlayClass}`;
            document.getElementById('select-title').innerText = type === 'chance' ? "âœ¨ éŒ¦å›Šå¦™è¨ˆ" : "âš¡ å¤©åŠ« (æ‡²ç½°å¡)";

            selected3.forEach((cardData) => {
                const el = document.createElement('div');
                el.className = 'tarot-card';
                el.onclick = () => revealCard(el, cardData, type);
                el.innerHTML = `
                    <div class="tarot-face tarot-back">
                        <div class="tarot-emblem">${type==='chance'?'â˜…':'âš¡'}</div>
                    </div>
                    <div class="tarot-face tarot-front">
                        <div class="tf-type">${type==='chance'?'CHANCE':'PUNISHMENT'}</div>
                        <div class="tf-title">${cardData.title}</div>
                        <div class="tf-desc">${cardData.desc}</div>
                    </div>
                `;
                grid.appendChild(el);
            });

            document.getElementById('overlay-select').style.display = 'flex';
            document.getElementById('btn-confirm-select').classList.add('hidden');
        }

        function revealCard(el, data, type) {
            if(el.classList.contains('flipped') || document.querySelectorAll('.tarot-card.flipped').length > 0) return;
            el.classList.add('flipped');
            document.querySelectorAll('.tarot-card').forEach(c => { if(c !== el) c.classList.add('disabled'); });

            // åŸ·è¡Œå¡ç‰‡æ•ˆæœ
            if(data.val !== 0) {
                // å¦‚æœæ˜¯æ‡²ç½°å¡ï¼Œvalé€šå¸¸æ˜¯æ­£æ•¸ä»£è¡¨æ‰£åˆ†ï¼Œæ‰€ä»¥è¦å–è² 
                // å¦‚æœæ˜¯æ©Ÿæœƒå¡ä¸­çš„ "å¤§æ±Ÿæ±å»" (æ‰£æ•µæ–¹)ï¼Œé‚è¼¯è¦å¦å¤–å¯«ï¼Œé€™è£¡æš«æ™‚ç°¡åŒ–ç‚ºæ‰£ç•¶å‰éšŠä¼åˆ†
                // ç‚ºäº†ç¬¦åˆæ‚¨Excelé‚è¼¯ï¼š
                // æ‡²ç½°å¡ val=10 -> æ‰£10åˆ†
                if(type === 'punish') {
                    modStat(state.turn, 's', -data.val); 
                } else if (type === 'chance' && data.title === 'å¤§æ±Ÿæ±å»') {
                    // ç‰¹æ®Šè™•ç†ï¼šæ‰£æ•µæ–¹
                    const enemy = state.turn === 'a' ? 'b' : 'a';
                    modStat(enemy, 's', -data.val);
                }
            }

            setTimeout(() => {
                document.getElementById('btn-confirm-select').classList.remove('hidden');
            }, 800);
        }

        function closeSelection() {
            document.getElementById('overlay-select').style.display = 'none';
            // å¦‚æœæ˜¯æŠ½å®Œå¡ï¼Œé€šå¸¸ä»£è¡¨é€™ä¸€å›åˆçµæŸï¼Œæ›ä¸‹ä¸€çµ„
            // é€™è£¡è‡ªå‹•å‘¼å« closeQuestion ä¾†æ›äºº
            // åªæœ‰åœ¨éŠæˆ²é€²è¡Œä¸­(æœ‰é¡Œç›®)æ™‚æ‰è‡ªå‹•æ›äºº
            if(!document.getElementById('action-btns').classList.contains('hidden')) {
                closeQuestion();
            }
        }

        // --- Wheel Logic ---
        let wheelSpinning = false;
        function showWheel() {
            document.getElementById('overlay-wheel').style.display='flex';
            initWheel();
            document.getElementById('btn-spin').disabled = false;
            document.getElementById('btn-close-wheel').classList.add('hidden');
        }

        function initWheel() {
            const cvs = document.getElementById('wheel-canvas');
            const ctx = cvs.getContext('2d');
            const w=500, h=500, cx=250, cy=250, r=240;
            const len = db.wheel.length;
            const arc = Math.PI*2/len;
            const colors = ['#1a1a1a', '#222'];
            
            ctx.clearRect(0,0,w,h);
            ctx.save();
            ctx.translate(cx,cy);
            
            for(let i=0; i<len; i++) {
                const ang = i*arc;
                ctx.beginPath();
                ctx.moveTo(0,0);
                ctx.arc(0,0,r,ang,ang+arc);
                ctx.fillStyle = colors[i%2];
                ctx.fill();
                ctx.lineWidth = 2; ctx.strokeStyle = "#d4af37"; ctx.stroke();
                
                ctx.save();
                ctx.rotate(ang + arc/2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "bold 16px Arial";
                const text = db.wheel[i].split("ã€‘")[0].replace("ã€","");
                ctx.fillText(text, r-20, 5);
                ctx.restore();
            }
            ctx.restore();
        }

        function spinWheel() {
            if(wheelSpinning) return;
            wheelSpinning = true;
            document.getElementById('btn-spin').disabled = true;
            const cvs = document.getElementById('wheel-canvas');
            const totalRot = 360 * 5 + Math.random() * 360; 
            cvs.style.transition = "transform 5s cubic-bezier(0.1,0,0.1,1)";
            cvs.style.transform = `rotate(-${totalRot}deg)`;

            setTimeout(() => {
                wheelSpinning = false;
                document.getElementById('btn-close-wheel').classList.remove('hidden');
            }, 5000);
        }
    </script>
</body>
</html>
